<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QUẢN LÍ</title>
    <!-- BOOTSTRAP STYLES-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FONTAWESOME STYLES-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
    <!-- CUSTOM STYLES-->
    <link href="assets/css/custom.css" rel="stylesheet" />
    <!-- GOOGLE FONTS-->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="wrapper">
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="adjust-nav">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">
                        <img src="assets/img/logo.png" />
                    </a>
                </div>

                <span class="logout-spn">
                    <a href="login.html" style="color: #fff">LOGOUT</a>
                </span>
            </div>
        </div>
        <!-- /. NAV TOP  -->
        <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">
                    <li>
                        <a href="index.html"><i class="fa fa-desktop"></i>DANH SÁCH KHÁCH HÀNG</a>
                    </li>

                    <li class="active-link">
                        <a href="customer-period.html"><i class="fa fa-table"></i>DANH SÁCH KHÁCH HÀNG ĐẾN HẠN</a>
                    </li>

                    <li>
                        <a href="customer-done.html"><i class="fa fa-table"></i>DANH SÁCH KHÁCH HÀNG TẤT TOÁN</a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper">
            <div id="page-inner">
                <div class="row">
                    <div class="col-lg-12">
                        <h2>DANH SÁCH KHÁCH HÀNG</h2>
                    </div>
                </div>
                <!-- /. ROW  -->
                <hr />
                <div class="row">
                    <div class="col-lg-12" style="text-align: center;">
                        <div class="alert alert-info">
                            <input id="search-customer" type="text" placeholder="Nhập tên khách hàng"
                                style="width: 45%;" />
                            <i class="fa fa-search" aria-hidden="true" style="font-size: 20px; cursor: pointer;"></i>
                        </div>
                        <div class="col-lg-12"
                            style="text-align: center; display: flex; align-items: center; justify-content: center; gap: 30px;">
                            <div>
                                <button>Tuần</button>
                            </div>
                            <div>
                                <button>Nửa tháng</button>
                            </div>
                            <div>
                                <button>Tháng</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /. ROW  -->
                <div class="row text-center pad-top">
                    <div>
                        <ul id="customer" style="list-style: none; font-size: 20px;">
                            <li class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <a href="customer-detail.html" style="color: red;">Khách hàng 1</a>
                            </li>
                            <li class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <a href="customer-detail.html" style="color: red;">Khách hàng 2</a>
                            </li>
                            <li class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <a href="customer-detail.html" style="color: orange;">Khách hàng 3</a>
                            </li>
                            <li class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <a href="customer-detail.html" style="color: orange;">Khách hàng 4</a>
                            </li>
                            <li class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <a href="customer-detail.html" style="color: green;">Khách hàng 5</a>
                            </li>
                            <li class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <a href="customer-detail.html" style="color: green;">Khách hàng 6</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- /. PAGE INNER  -->
            </div>
            <!-- /. PAGE WRAPPER  -->
        </div>

        <!-- Nút + -->
        <button id="add-customer-btn">+</button>

        <!-- Modal -->
        <div id="customer-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Thêm Khách Hàng</h2>
                <div>
                    <label>Hạn Thanh Toán:</label><br>
                    <input type="date" class="customer-name"><br>
                </div>
                <div>
                    <label>Ngày Tạo Hợp Đồng:</label>
                    <input type="date" class="customer-name">
                </div>
                <div>
                    <label>Số CCCD:</label><br>
                    <input type="text" class="customer-name" placeholder="Nhập số CCCD khách hàng"><br>
                </div>
                <div>
                    <label>Số điện thoại:</label><br>
                    <input type="text" class="customer-name" placeholder="Nhập số điện thoại khách hàng"><br>
                </div>
                <div>
                    <label>Tên khách hàng:</label>
                    <input type="text" class="customer-name" placeholder="Nhập tên khách hàng"><br>
                </div>
                <div>
                    <label>Địa chỉ:</label><br>
                    <input type="text" class="customer-name" placeholder="Nhập địa chỉ khách hàng"><br>
                </div>
                <div>
                    <label>Thời gian bắt đầu trả:</label><br>
                    <input type="date" id="selectedDate" class="customer-name"><br>
                </div>
                <div>
                    <label>Cách trả:</label><br>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="time" value="7" checked>
                        <label class="form-check-label" for="male">Tuần</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="time" value="14">
                        <label class="form-check-label" for="female">Nửa Tháng</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="time" value="30">
                        <label class="form-check-label" for="other">Tháng</label>
                    </div>
                </div>
                <div>
                    <label>Thời gian trả:</label><br>
                    <input type="date" id="returnDate" class="customer-name"><br>
                </div>
                <div>
                    <label>Hạn thanh toán:</label><br>
                    <input type="date" class="customer-name"><br>
                </div>
                <div>
                    <label>Tên cửa hàng:</label><br>
                    <input type="text" class="customer-name" placeholder="Nhập tên cửa hàng"><br>
                </div>
                <div>
                    <label>Loại thiết bị:</label><br>
                    <input type="text" class="customer-name" placeholder="Nhập tên thiết bị"><br>
                </div>
                <div>
                    <label>Tài khoản ICLOUD:</label><br>
                    <input type="text" class="customer-name" placeholder="Nhập ICLOUD"><br>
                </div>
                <div>
                    <label>IMEI:</label><br>
                    <input type="text" class="customer-name" placeholder="Nhập IMEI"><br>
                </div>
                <div>
                    <label>Giá trị máy:</label><br>
                    <input type="text" class="customer-name" id="device" placeholder="Nhập giá trị máy"><br>
                </div>
                <div>
                    <label>Giải ngân:</label><br>
                    <input type="text" id="amount" class="customer-name" placeholder="Nhập số tiền giải ngân"
                        oninput="calculateLoan()"><br>
                </div>
                <div>
                    <label>Kỳ hạn vay (tháng):</label><br>
                    <input type="number" id="term" class="customer-name" placeholder="Nhập số tiền giải ngân"
                        oninput="calculateLoan()"><br>
                </div>
                <div>
                    <label>Lãi (tính theo %):</label><br>
                    <input type="number" id="interest" class="customer-name" placeholder="Nhập số tiền giải ngân"
                        oninput="calculateLoan()"><br>
                </div>
                <div>
                    <label>Tiền thanh toán (trả theo tháng):</label><br>
                    <input type="text" id="paymonth" class="customer-name" disabled><br>
                </div>
                <div>
                    <label>Tiền lãi:</label><br>
                    <input type="text" id="interestAmount" class="customer-name" disabled><br>
                </div>
                <div>
                    <label>Tiền gốc:</label><br>
                    <input type="text" id="originalAmount" class="customer-name" disabled><br>
                </div>
                <div>
                    <label>Tổng số kì phải trả:</label><br>
                    <input type="text" id="monthAmount" class="customer-name" disabled><br>
                </div><br>
                <div style="text-align: center;">
                    <button class="btn-primary" id="save-customer"
                        style="margin-right: 10px; width: 100px;">Lưu</button>
                    <button class="btn-secondary" id="cancel" style="width: 100px;">Hủy</button>
                </div>
            </div>
        </div>
        <!-- /. WRAPPER  -->
        <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
        <!-- JQUERY SCRIPTS -->
        <script src="assets/js/jquery-1.10.2.js"></script>
        <!-- BOOTSTRAP SCRIPTS -->
        <script src="assets/js/bootstrap.min.js"></script>
        <!-- CUSTOM SCRIPTS -->
        <script src="assets/js/custom.js"></script>
</body>
<script>
    document.getElementById("search-customer").addEventListener("input", function () {
        let filter = this.value.toLowerCase();
        let items = document.querySelectorAll("#customer li");

        items.forEach(item => {
            let text = item.textContent.toLowerCase();
            item.style.display = text.includes(filter) ? "block" : "none";
        });
    });

    document.getElementById("add-customer-btn").addEventListener("click", function () {
        document.getElementById("customer-modal").style.display = "flex";
    });

    // Đóng modal khi nhấn vào nút đóng
    document.querySelector(".close").addEventListener("click", function () {
        document.getElementById("customer-modal").style.display = "none";
    });

    document.querySelector("#save-customer").addEventListener("click", function () {
        document.getElementById("customer-modal").style.display = "none";
    });

    document.querySelector("#cancel").addEventListener("click", function () {
        document.getElementById("customer-modal").style.display = "none";
    });

    // Đóng modal khi click ra ngoài
    window.addEventListener("click", function (event) {
        let modal = document.getElementById("customer-modal");
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });

    function calculateLoan() {
        let interestRate = parseFloat(document.getElementById("interest").value) || 0;
        let loanAmount = parseFloat(document.getElementById("amount").value) || 0;
        let loanTerm = parseFloat(document.getElementById("term").value) || 1;

        let originalMonth = loanAmount / loanTerm;

        let interestAmount = loanAmount * interestRate / 100;

        let totalAmount = originalMonth + interestAmount;

        // Hiển thị kết quả
        document.getElementById("paymonth").value = totalAmount.toLocaleString();
        document.getElementById("interestAmount").value = interestAmount.toLocaleString();
        document.getElementById("originalAmount").value = originalMonth.toLocaleString();
        document.getElementById("monthAmount").value = loanTerm.toString();
    }

    document.addEventListener("DOMContentLoaded", function () {
        const radioButtons = document.querySelectorAll("input[name='time']");
        const selectedDateInput = document.getElementById("selectedDate");
        const returnDateInput = document.getElementById("returnDate");

        function updateReturnDate(daysToAdd) {
            let selectedDate = selectedDateInput.value ? new Date(selectedDateInput.value) : new Date();
            selectedDate.setDate(selectedDate.getDate() + daysToAdd);
            let formattedDate = selectedDate.toISOString().split("T")[0];
            returnDateInput.value = formattedDate;
        }

        radioButtons.forEach(radio => {
            radio.addEventListener("change", function () {
                if (!selectedDateInput.value) {
                    alert("Vui lòng chọn ngày bắt đầu trước!");
                    return;
                }
                updateReturnDate(parseInt(this.value));
            });
        });

        const device = document.getElementById("device");

        device.addEventListener("input", function () {
            let value = this.value.replace(/\D/g, "");
            if (value) {
                this.value = parseFloat(value).toLocaleString();
            }
        });

        const amount = document.getElementById("amount");

        amount.addEventListener("input", function () {
            let value = this.value.replace(/\D/g, "");
            if (value) {
                this.value = parseFloat(value).toLocaleString();
            }
        });
    });
</script>

</html>